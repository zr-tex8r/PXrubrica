\documentclass{jsarticle}
\usepackage{otf}
\usepackage{plext}
\usepackage{pxrubrica}
\rubysetup{<->} % 進入あり
% \rubyintergap は 0 のまま
\begin{document}

\begin{center}
\begin{minipage}<t>{20zw}
%--------------------------------------- 10.1節
%% 中付きルビ
\rubysetup{j}% 熟語ルビを既定にする
…徒、\ruby{仲由}{ちゆう|ゆう}、字…\quad
…げ、\ruby[|-|]{勢}{いきほひ}\ruby[|-]{猛}{まう}に、…\par
% ※恐らく前には進出した方がよいだろう
…げ、\ruby[-|]{勢}{いきほひ}\ruby[|-]{猛}{まう}に、…\par
% モノルビ
\ruby[m]{蓬頭}{ほう|とう}\quad \ruby[m]{突鬢}{とつ|ぴん}\quad \ruby[m]{引提}{ひつ|さ}げ\par
%--------------------------------------- 10.2節
%% 肩付きルビ
\rubysetup{hm}% 肩付きモノルビを既定にする
% 本パッケージでは、「肩付き(h)」は「ルビの方が短い」場合にのみ影響する。
% 「長いルビ」の突出の制御は〈||〉で行う。
…徒、\ruby[||-]{仲由}{ちゆう|ゆう}、字…\quad
…げ、\ruby[||-|]{勢}{いきほひ}\ruby[|-]{猛}{まう}に、…\par
% ※新設された「拡張肩付き(H)」モードを利用する
\rubysetup{H}% 拡張肩付き
…徒、\ruby{仲由}{ちゆう|ゆう}、字…\quad
…げ、\ruby[-|]{勢}{いきほひ}\ruby{猛}{まう}に、…\par
% 熟語ルビ vs モノルビ
\rubysetup{cj}% 中付き熟語ルビを既定にする
\ruby[||-]{仲由}{ちゆう|ゆう}\quad
\ruby[||m]{仲由}{ちゆう|ゆう}\par
%--------------------------------------- 10.3節
\ruby{太政大臣}{だ|じやう|だい|じん}\quad
\ruby[m]{太政大臣}{だ|じやう|だい|じん}\par
% 本パッケージではこの例は問題を起こさない
\ruby[g]{大臣}{おとヾ}\par
% 「附属書F」のような熟語ルビ配置には非対応なので、
% 前突出禁止を適宜利用して対処するしかない
\ruby[|m|]{山蔭}{やま|かげ}\ruby[||m>]{卿}{きやう}の\quad
\ruby[|m|]{山蔭}{やま|かげ}\ruby[||m)]{卿}{きやう}の\par
\ruby[|m|]{山蔭}{やま|かげ}\ruby[||m|]{卿}{きやう}の\quad
\ruby[<->]{山蔭卿}{やま|かげ|きやう}の\par
% ※この場合、「拡張肩付き」でも実現できる
\ruby[Hm>]{山蔭卿}{やま|かげ|きやう}の\quad
\ruby[Hm)]{山蔭卿}{やま|かげ|きやう}の\par
% ※親文字均等割り抑止(E)を用いた対処法
\ruby[||gE>]{山蔭卿}{やまかげきやう}の\quad
\ruby[||gE)]{山蔭卿}{やまかげきやう}の\par
%--------------------------------------- 10.4節
\begin{flushleft} % ※ jsarticle なので和文スケールは約 0.925
\fontsize{20}{25}\selectfont % 親文字 20pt
\rubysizeratio{0.25}\ruby{仲由}{ちゆう|ゆう}\quad % ルビ 5pt
\rubysizeratio{0.5}\ruby{仲由}{ちゆう|ゆう}\quad  % ルビ 10pt
\rubysizeratio{0.45}\ruby{仲由}{ちゆう|ゆう}\par  % ルビ 9pt
% ルビのサイズを三分にする ※『要件』でいう所の「三分ルビ」ではない
\rubysizeratio{0.333}\ruby{仲由}{ちゆう|ゆう}\quad  % ルビ 6.66pt
\end{flushleft}
\end{minipage}
\par
\begin{minipage}<t>{20zw}
%--------------------------------------- 11.1節
% 本パッケージでは常にルビは高さを持たないものとする
\frame{\parbox{19zw}{%
\ruby{千本}{せん|ぼん}の\ruby{釋迦}{しや|か}\ruby{念佛}{ねん|ぶつ}は
\ruby{文永}{ぶん|えい}の\ruby{此}{ころ}、\ruby{如輪}{によ|りん}%
\ruby[|-]{上人}{しやう|にん}、これをはじめられけり。
}}
\par\medskip
%--------------------------------------- 11.2節
\frame{\parbox{19zw}{%
\rubysetup{h}%
\ruby{火}{ほ}もとは\ruby{樋口富}{ひ|ぐち|とみ}の\ruby{小路}{こう|ぢ}とかや、
\ruby{舞人}{まひ|びと}を\ruby{宿}{やど}せる\ruby{仮屋}{かり|や}より
\ruby{出}{い}で\ruby{来}{き}たりけるとなん。
\ruby{吹}{ふ}き\ruby{迷}{まよ}ふ\ruby{風}{かぜ}に、とかく\ruby{移}{うつ}りゆく
ほどに、\ruby{扇}{あふぎ}をひろげたるがごとく\ruby{末広}{すゑ|ひろ}になりぬ。
}}
\par\medskip
%--------------------------------------- 11.3節(行頭の中付きルビ)
\frame{\parbox{15zw}{%
１２３４５６７８９０１２３４５\par
% 段落下げの直後の場合
\setlength{\parindent}{1zw} % 段落下げを有効にする
% ※ ! を指定すると段落頭でも進入が有効になる
%    ! のない <m は |m と同じ結果になる
\ruby[<!m]{蛤御門}{はまぐり|ご|もん}の変は幕末の…\par
\ruby[|m]{蛤御門}{はまぐり|ご|もん}の変は幕末の…\par
}}\par
% 改行の直後の場合
% ※実用的には行頭を自動で判別できる必要があるがその実装は難しい
\frame{\parbox{10zw}{%
１２３４５６７８９０
\ruby[<m>]{蛤}{はまぐり}は浜の栗の意９０ %+ ※この場合、前側は
\ruby[(m)]{蛤}{はまぐり}は浜の栗の意９０ %+   <, (, | のどれにしても同じ
\ruby[|m|]{蛤}{はまぐり}は浜の栗の意９０ %+   段落頭でないので ! も無関係
\ruby[||m>]{蛤}{はまぐり}は浜の栗の意９０
\ruby[||m)]{蛤}{はまぐり}は浜の栗の意９０
\ruby[||m|]{蛤}{はまぐり}は浜の栗の意９０
% ※行長合わせの調整のため空き量が自然長から外れていることに注意
}}\par
%--------------------------------------- 11.4節(行末のルビ)
\frame{\parbox{10zw}{%
１２３４５６７８９０
（１２３４５美味の\ruby[<m>]{蛤}{はまぐり}%
１２３４５美味の\ruby[(m)]{蛤}{はまぐり}%
１２３４５美味の\ruby[|m|]{蛤}{はまぐり}%
１２３４５美味の\ruby[<m||]{蛤}{はまぐり}%
１２３４５美味の\ruby[(m||]{蛤}{はまぐり}%
１２３４５美味の\ruby[|m||]{蛤}{はまぐり}%
}}\par
\end{minipage}
\end{center}
\end{document}
